<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <title>Referee Availability</title>
        <link rel="preconnect" href="https://fonts.googleapis.com">
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link href="https://fonts.googleapis.com/css2?family=Audiowide&display=swap" rel="stylesheet">
        <link href="https://fonts.googleapis.com/css2?family=Goldman:wght@400;700&display=swap" rel="stylesheet">
        <style>
        #calendar-container {
            background-color: white;
            box-shadow: 2px 2px 10px 1px lightgray;
        }
        .calendar-headers, .calendar-cards {
            display: grid;
            grid-template-columns: 1fr 1fr 1fr 1fr 1fr 1fr 1fr;
            gap: 5px 5px;
        }
        .calendar-cards {
            grid-template-rows: auto auto auto auto auto auto auto;
        }
        .calendar-headers {
            grid-template-rows: 1fr;
            padding-top: 0.5em;
            padding-bottom: 0.2em;
        }
        .calendar-card {
            padding: 0.5em;
            background-color: #dfffdf;
            position: relative;
            padding-bottom: 2.7em;
        }
        .calendar-header {
            text-align: center;
            font-family: "Audiowide", sans-serif;
            
        }
        .calendar-date {
            font-family: "Audiowide", sans-serif;
            font-size: 2.2em;
            color: #b0b0b0;
            position: absolute;
            bottom: 0.1em;
            left: 0.3em;
        }
        .calendar-card ul {
            margin-left: -2em;
            list-style: none;
        }
        .card-venue {
            margin: 0.1em;
            font-size: small;
            font-family: Calibri;
            cursor: pointer;
            font-weight: bold;
            user-select: none;
        }
        .card-venue::after {
            content: ">";
            margin-left: 0.5em;
            margin-top: 0.2em;
            position: absolute;
            transform: rotate(90deg);
        }
        .card-venue.closed::after {
            transform: rotate(0deg);
        }
        .card-venue.closed + .card-list {
            display: none;
        }
        #calendar-title {
            font-family: "Audiowide", sans-serif;
            text-align: center;
        }
        .card-label {
            font-size: small;
            font-family: Calibri;
        }
        .card-game {
            margin: 0.1em;
        }
        .card-list {
            margin: 0.1em;
            margin-left: -2em;
        }
        #btn-bin {
            background-color: white;
            padding: 1em;
            border: 1px solid black;
            display: grid;
            grid-template-columns: 1fr 1fr 1fr 1fr;
            column-gap: 3em;
            max-width: 25em;
            margin-left: auto;
            margin-right: auto;
        }
        #footer {
            position: fixed;
            bottom: 0px;
            width: 100%;
        }
        .game-ratio {
            margin-left: 0.25em;
            font-weight: normal;
        }
        body {
            font-family: Calibri;
            margin: 0;
            background-color: rgb(240, 240, 240);
            min-width: 1000px;
        }
        nav {
            background: linear-gradient(rgb(134, 160, 232), rgb(87, 133, 221), rgb(54, 95, 174) 100%);
            display: grid;
            grid-template-columns: 1fr 2fr 1fr;
            color: white;
            column-gap: 3vw;
            padding: 0 3vw 0 3vw;
        }
        h1 {
            text-align: center;
        }
        #homepage {
            padding: 5em;
            width: 50vw;
            min-width: 500px;
            background-color: white;
            margin-right: auto;
            margin-left: auto;
            margin-top: 3em;
            margin-bottom: 2em;
            box-shadow: 2px 2px 10px 1px gray;
        }
        #calendar-main {
            padding: 1em;
        }
        h4 {
            margin-bottom: 0.2em;
        }
        h4 + p {
            margin-top: 0.2em;
        }
        #logo {
            font-family: "Goldman", sans-serif;
            font-weight: 400;
        }
        </style>
    </head>
    <body>
        <nav>
            <h2 id="logo">⚽ Game Time Assigning</h2>
            <h1>Availability Form</h1>
            <h3 id="conference">Suburban East &amp; Metro East Conferences 2024</h3>
        </nav>
        <div id="calendar-main">
            <h1 id="calendar-title">August</h1>
            <h2 id="league"></h2>
            <div id="calendar-container">
                <div class="calendar">
                    <div class="calendar-headers">
                        <div class="calendar-header">SUNDAY</div>
                        <div class="calendar-header">MONDAY</div>
                        <div class="calendar-header">TUESDAY</div>
                        <div class="calendar-header">WEDNESDAY</div>
                        <div class="calendar-header">THURSDAY</div>
                        <div class="calendar-header">FRIDAY</div>
                        <div class="calendar-header">SATURDAY</div>
                    </div>
                    <div class="calendar-cards" id="august-cards"></div>
                    <div class="calendar-cards" id="september-cards"></div>
                    <div class="calendar-cards" id="october-cards"></div>
                </div>
            </div>
        </div>
        <div id="homepage">
            <label for="referee-name"><b style="font-size: 1.3em;">Referee Name: </b></label>
            <input id="referee-name" placeholder="John Smith"></input>
            <br><br>
            <p>Summer soccer season is in full-swing and Minnesota high school soccer will be here before you know it! As a reminder, the new negotiated rate for high school varsity games in 2024 is $85, with no discounted rate for second games in a doubleheader. Rate for lower-level games is $70, also with no discounted rate for second game in a doubleheader.</p>

            <p>Also new this year is the offer to earn $10 off a membership to the Twin Cities Soccer Referee Organization (TCSRO) if you officiate ten or more games for my conferences or for Brian Wood’s conferences. TCSRO not only advocates for high school referees, they provide referee training, observation and learning material for members.</p>

            <p>For those of you interested in officiating high school this year, particularly the Metro East and Suburban East Conferences, I have created an online calendar for you to select games that work best for you and to help avoid repeat teams in your schedule. Please note that this will give me an indication of the games you would like, but it does not guarantee that you will get all games you select.</p>

 

            <p>I thank you in advance for officiating high school and for all your great work thus far this summer in rec and semi-pro leagues! </p>
            <hr style="margin-bottom: 1em; color: white;">
            <h2 style="margin-bottom: 0em;">Instructions</h2>
            <h4 style="margin-top: 0em;">How To Begin:</h4>
            <p>Enter your name at the top of this page.</p>
            <h4 style="margin-top: 0em;">Selecting Games</h4>
            <p>Please select the checkboxes of games you are interested in officiating for each day you are available. (NOTE: You may select more than one location for each day.) Use the "Next" and "Previous" buttons at the bottom of each page to navigate through August, September and October.</p>
            <h4>Sharing Your Selected Games:</h4>
            <p>After you have selected all games you are requesting, select "download availability" at the bottom of the page. Your file will download to your computer's Downloads folder "&lt;your_name&gt;.json". After you have located your file, please email it to <a href="mailto:gametimeassigning@gmail.com?subject=Highschool%20Availability">gametimeassigning@gmail.com</a>. This is not a file you will be able to open and view, as it is a file for scripting purposes on my end only.</p>
            <h4>Saving Your Progress</h4>
            <p>If you are unable to complete your selections in one sitting, you can save your progress by clicking "Save" at the bottom of the page. This will download your working file "&lt;your_name&gt;.html" to your computer's Downloads folder. When you return to complete your calendar, opening that file will ensure your progress was saved. This is a file that you can return to remind yourself of what games you selected.</p>
        </div>
        <div id="footer">
            <div id="btn-bin">
                <button id="previous-btn" class="btn" onclick="previousPage()">Previous</button>
                <a id="save-btn" class="btn" onclick="saveFile(arguments[0]);" href="#" download="page.html">save</a>
                <a id="availability-btn" class="btn" onclick="downloadAvailability(arguments[0]);" href="#" download="availability.json">download availability</a>
                <button id="next-btn" class="btn" onclick="nextPage()">Next</button>
            </div>
        </div>
        
    </body>
    <script>
		const august = 
`Game ID,Date,Time,Venue,Gender,Level,Home Team,Away Team
322-HSB24,08/22/2024,15:00:00,Hill-Murray High School,Boys,B-Squad,Hill-Murray,Stillwater
323-HSB24,08/22/2024,16:45:00,Hill-Murray High School,Boys,Grade 9,Hill-Murray,Stillwater
381-HSB24,08/22/2024,17:00:00,Simley High School,Boys,C-Squad,Simley,Rochester Century
380-HSB24,08/22/2024,17:00:00,Simley High School,Boys,JV,Simley,Rochester Century
305-HSB24,08/22/2024,17:30:00,Mounds View High School,Girls,Varsity,Mounds View,Champlin Park
100-HSG24,08/22/2024,19:00:00,Cretin-Derham Hall,Girls,Varsity,Cretin-Derham Hall,Hill-Murray
103-HSG24,08/22/2024,19:00:00,Hastings High School,Girls,Varsity,Hastings,Eastview
382-HSB24,08/22/2024,19:00:00,Simley High School,Boys,Varsity,Simley,Rochester Century
310-HSB24,08/22/2024,19:00:00,Stillwater High School,Boys,Varsity,Stillwater,Minneapolis Southwest
306-HSB24,08/22/2024,19:30:00,Mounds View High School,Boys,Varsity,Mounds View,Rochester Lourdes
303-HSB24,08/23/2024,08:00:00,Forest Lake High School,Boys,JV,Forest Lake,Blaine
103-HSB24,08/23/2024,10:00:00,Forest Lake High School,Boys,Varsity,Forest Lake,Blaine
304-HSB24,08/23/2024,17:00:00,Forest Lake High School,Boys,JV,Forest Lake,Duluth East
224-HSG24,08/24/2024,09:00:00,Hastings High School,Girls,C-Squad,Hastings,Bloomington Jefferson
225-HSB24,08/24/2024,09:00:00,Hastings High School,Boys,C-Squad,Hastings,Bloomington Jefferson
383-HSB24,08/24/2024,09:00:00,Simley High School,Boys,C-Squad,Simley,Apple Valley
385-HSB24,08/24/2024,09:00:00,Simley High School,Girls,C-Squad,Simley,Apple Valley
384-HSB24,08/24/2024,09:00:00,Simley High School,Girls,JV,Simley,Apple Valley
109-HSB24,08/24/2024,11:00:00,East Ridge High School,Boys,Varsity,East Ridge,Rosemount
225-HSG24,08/24/2024,11:00:00,Hastings High School,Girls,JV,Hastings,Bloomington Jefferson
226-HSB24,08/24/2024,11:00:00,Hastings High School,Boys,JV,Hastings,Bloomington Jefferson
325-HSB24,08/24/2024,11:00:00,Hill-Murray High School,Boys,B-Squad,Hill-Murray,Benilde-St Margaret's
324-HSB24,08/24/2024,11:00:00,Hill-Murray High School,Boys,JV,Hill-Murray,Duluth Denfeld
386-HSB24,08/24/2024,11:00:00,Simley High School,Boys,JV,Simley,Apple Valley
387-HSB24,08/24/2024,11:00:00,Simley High School,Girls,Varsity,Simley,Apple Valley
110-HSB24,08/24/2024,11:00:00,Woodbury High School,Boys,Varsity,Woodbury,St Thomas Academy
104-HSG24,08/24/2024,13:00:00,East Ridge High School,Girls,Varsity,East Ridge,Rosemount
326-HSB24,08/24/2024,13:00:00,Hill-Murray High School,Girls,JV,Hill-Murray,Totino-Grace
107-HSB24,08/24/2024,13:00:00,North St Paul High School,Boys,Varsity,North St Paul,Minneapolis Edison
388-HSB24,08/24/2024,13:00:00,Simley High School,Boys,Varsity,Simley,Apple Valley
311-HSB24,08/24/2024,13:00:00,Stillwater High School,Girls,Varsity,Stillwater,Lakeville North
109-HSG24,08/26/2024,14:00:00,Roseville High School,Girls,Varsity,Roseville,Duluth Denfeld
327-HSB24,08/26/2024,17:15:00,Hill-Murray High School,Boys,B-Squad,Hill-Murray,DeLaSalle
242-HSG24,08/27/2024,14:00:00,Two Rivers High School,Girls,JV,Two Rivers,Rochester John Marshall
389-HSB24,08/27/2024,17:00:00,Simley High School,Girls,JV,Simley,Blake School
111-HSB24,08/27/2024,17:00:00,South St Paul High School,Boys,Varsity,South St Paul,Jordan
307-HSB24,08/27/2024,19:00:00,Mounds View High School,Girls,Varsity,Mounds View,Hill-Murray
390-HSB24,08/27/2024,19:00:00,Simley High School,Girls,Varsity,Simley,Blake School
316-HSB24,08/27/2024,19:00:00,White Bear Lake North High School,Girls,Varsity,White Bear Lake,Mahtomedi
317-HSB24,08/28/2024,17:00:00,White Bear Lake North High School,Girls,Varsity,White Bear Lake,Eagan
328-HSB24,08/28/2024,17:15:00,Hill-Murray High School,Girls,C-Squad,Hill-Murray,East Ridge
318-HSB24,08/28/2024,19:00:00,White Bear Lake North High School,Boys,Varsity,White Bear Lake,Eagan
115-HSG24,08/29/2024,15:00:00,Park High School,Girls,Varsity,Park,Hastings
329-HSB24,08/29/2024,15:30:00,Hill-Murray High School,Boys,Grade 9,Hill-Murray,East Ridge
330-HSB24,08/29/2024,15:30:00,Hill-Murray High School,Girls,JV,Hill-Murray,East Ridge
392-HSB24,08/29/2024,16:00:00,Simley High School,Boys,C-Squad,Simley,St Croix Lutheran
391-HSB24,08/29/2024,16:00:00,Simley High School,Boys,JV,Simley,St Croix Lutheran
417-HSB24,08/29/2024,17:00:00,Tartan High School,Girls,Varsity,Tartan,Highland Park
332-HSB24,08/29/2024,17:15:00,Hill-Murray High School,Boys,B-Squad,Hill-Murray,East Ridge
331-HSB24,08/29/2024,17:15:00,Hill-Murray High School,Boys,JV,Hill-Murray,East Ridge
393-HSB24,08/29/2024,18:00:00,Simley High School,Boys,Varsity,Simley,St Croix Lutheran
431-HSB24,08/29/2024,18:00:00,St Thomas Academy,Boys,Varsity,St Thomas Academy,Academy of Holy Angels
302-HSB24,08/29/2024,19:00:00,Cretin-Derham Hall,Girls,Varsity,Cretin-Derham Hall,Simley
418-HSB24,08/29/2024,19:00:00,Tartan High School,Boys,Varsity,Tartan,Highland Park
312-HSB24,08/30/2024,19:00:00,Stillwater High School,Girls,Varsity,Stillwater,Edina`
		const september = 
`Game ID,Date,Time,Venue,Gender,Level,Home Team,Away Team
228-HSG24,09/03/2024,15:30:00,Hastings High School,Girls,C-Squad,Hastings,Burnsville
227-HSB24,09/03/2024,15:30:00,Hastings High School,Boys,C-Squad,Hastings,Burnsville
334-HSB24,09/03/2024,16:00:00,Hill-Murray High School,Boys,Grade 9,Hill-Murray,Academy of Holy Angels
333-HSB24,09/03/2024,16:00:00,Hill-Murray High School,Boys,B-Squad,Hill-Murray,Academy of Holy Angels
229-HSG24,09/03/2024,17:00:00,Hastings High School,Girls,JV,Hastings,Burnsville
228-HSB24,09/03/2024,17:00:00,Hastings High School,Boys,JV,Hastings,Burnsville
116-HSB24,09/03/2024,17:00:00,Hastings High School,Boys,Varsity,Hastings,Burnsville
120-HSG24,09/03/2024,17:00:00,Park High School,Girls,Varsity,Park,Apple Valley
419-HSB24,09/03/2024,17:00:00,Tartan High School,Girls,Varsity,Tartan,St Paul Central
336-HSB24,09/03/2024,17:30:00,Hill-Murray High School,Girls,JV,Hill-Murray,Academy of Holy Angels
335-HSB24,09/03/2024,17:30:00,Hill-Murray High School,Boys,JV,Hill-Murray,Academy of Holy Angels
122-HSG24,09/03/2024,19:00:00,Hastings High School,Girls,Varsity,Hastings,Burnsville
119-HSB24,09/03/2024,19:00:00,Park High School,Boys,Varsity,Park,Apple Valley
124-HSG24,09/03/2024,19:00:00,Two Rivers High School,Girls,Varsity,Two Rivers,Benilde-St Margaret's
319-HSB24,09/03/2024,19:00:00,White Bear Lake North High School,Girls,Varsity,White Bear Lake,Andover
121-HSG24,09/03/2024,19:00:00,Woodbury High School,Girls,Varsity,Woodbury,Lakeville South
118-HSG24,09/03/2024,19:30:00,Cretin-Derham Hall,Girls,Varsity,Cretin-Derham Hall,Mahtomedi
337-HSB24,09/04/2024,16:30:00,Hill-Murray High School,Boys,B-Squad,Hill-Murray,Mounds View
394-HSB24,09/05/2024,15:45:00,Simley High School,Girls,JV,Simley,Hill-Murray
125-HSB24,09/05/2024,17:00:00,East Ridge High School,Boys,Varsity,East Ridge,Roseville
128-HSB24,09/05/2024,17:00:00,Forest Lake High School,Boys,Varsity,Forest Lake,Cretin-Derham Hall
126-HSB24,09/05/2024,17:00:00,Park High School,Boys,Varsity,Park,Mounds View
131-HSG24,09/05/2024,17:00:00,Simley High School,Girls,Varsity,Simley,Hill-Murray
132-HSG24,09/05/2024,17:00:00,South St Paul High School,Girls,Varsity,South St Paul,Mahtomedi
124-HSB24,09/05/2024,17:00:00,Tartan High School,Boys,Varsity,Tartan,Two Rivers
395-HSB24,09/05/2024,17:15:00,Simley High School,Boys,JV,Simley,Hill-Murray
126-HSG24,09/05/2024,19:00:00,East Ridge High School,Girls,Varsity,East Ridge,Roseville
134-HSG24,09/05/2024,19:00:00,Forest Lake High School,Girls,Varsity,Forest Lake,Cretin-Derham Hall
127-HSG24,09/05/2024,19:00:00,Park High School,Girls,Varsity,Park,Mounds View
122-HSB24,09/05/2024,19:00:00,Simley High School,Boys,Varsity,Simley,Hill-Murray
123-HSB24,09/05/2024,19:00:00,South St Paul High School,Boys,Varsity,South St Paul,Mahtomedi
133-HSG24,09/05/2024,19:00:00,Tartan High School,Girls,Varsity,Tartan,Two Rivers
339-HSB24,09/06/2024,15:45:00,Hill-Murray High School,Girls,C-Squad,Hill-Murray,Simley
338-HSB24,09/06/2024,15:45:00,Hill-Murray High School,Boys,B-Squad,Hill-Murray,Hudson
340-HSB24,09/06/2024,17:15:00,Hill-Murray High School,Boys,C-Squad,Hill-Murray,Simley
342-HSB24,09/07/2024,10:00:00,Hill-Murray High School,Boys,Grade 9,Hill-Murray,Cretin-Derham Hall
341-HSB24,09/07/2024,10:00:00,Hill-Murray High School,Boys,JV,Hill-Murray,Cretin-Derham Hall
137-HSG24,09/07/2024,11:00:00,North St Paul High School,Girls,Varsity,North St Paul,Richfield
343-HSB24,09/07/2024,12:00:00,Hill-Murray High School,Boys,B-Squad,Hill-Murray,Cretin-Derham Hall
129-HSB24,09/07/2024,12:00:00,Hill-Murray High School,Boys,Varsity,Hill-Murray,Cretin-Derham Hall
130-HSB24,09/07/2024,12:00:00,South St Paul High School,Boys,Varsity,South St Paul,Highland Park
135-HSG24,09/07/2024,13:00:00,Irondale High School,Girls,Varsity,Irondale,Fridley
136-HSG24,09/07/2024,13:00:00,Roseville High School,Girls,Varsity,Roseville,Concordia Academy
420-HSB24,09/07/2024,13:00:00,Tartan High School,Boys,Varsity,Tartan,East Ridge
320-HSB24,09/07/2024,13:00:00,White Bear Lake North High School,Boys,Varsity,White Bear Lake,North St Paul
436-HSB24,09/07/2024,14:00:00,St Thomas Academy,Boys,Varsity,St Thomas Academy,Blake School
344-HSB24,09/09/2024,15:45:00,Hill-Murray High School,Boys,B-Squad,Hill-Murray,Tartan
138-HSG24,09/09/2024,17:00:00,Hastings High School,Girls,Varsity,Hastings,Two Rivers
139-HSG24,09/09/2024,17:00:00,Mahtomedi High School,Girls,Varsity,Mahtomedi,Tartan
135-HSB24,09/09/2024,17:00:00,North St Paul High School,Boys,Varsity,North St Paul,South St Paul
346-HSB24,09/09/2024,17:15:00,Hill-Murray High School,Boys,B-Squad,Hill-Murray,St Thomas Academy
345-HSB24,09/09/2024,17:15:00,Hill-Murray High School,Boys,JV,Hill-Murray,St Thomas Academy
132-HSB24,09/09/2024,19:00:00,Hastings High School,Boys,Varsity,Hastings,Two Rivers
133-HSB24,09/09/2024,19:00:00,Hill-Murray High School,Boys,Varsity,Hill-Murray,St Thomas Academy
134-HSB24,09/09/2024,19:00:00,Mahtomedi High School,Boys,Varsity,Mahtomedi,Tartan
140-HSG24,09/09/2024,19:00:00,North St Paul High School,Girls,Varsity,North St Paul,South St Paul
313-HSB24,09/09/2024,19:00:00,Stillwater High School,Girls,Varsity,Stillwater,Andover
347-HSB24,09/11/2024,15:45:00,Hill-Murray High School,Boys,JV,Hill-Murray,Mahtomedi
396-HSB24,09/11/2024,15:45:00,Simley High School,Boys,JV,Simley,Tartan
146-HSG24,09/11/2024,17:00:00,Hastings High School,Girls,Varsity,Hastings,North St Paul
231-HSB24,09/11/2024,17:15:00,Hastings High School,Boys,JV,Hastings,North St Paul
348-HSB24,09/11/2024,17:15:00,Hill-Murray High School,Girls,JV,Hill-Murray,Mahtomedi
397-HSB24,09/11/2024,17:15:00,Simley High School,Girls,JV,Simley,Tartan
143-HSB24,09/11/2024,18:00:00,St Thomas Academy,Boys,Varsity,St Thomas Academy,South St Paul
141-HSB24,09/11/2024,19:00:00,Hastings High School,Boys,Varsity,Hastings,North St Paul
149-HSG24,09/11/2024,19:00:00,South St Paul High School,Girls,Varsity,South St Paul,St Croix Prepatory
150-HSG24,09/12/2024,17:00:00,Forest Lake High School,Girls,Varsity,Forest Lake,Mounds View
151-HSG24,09/12/2024,17:00:00,Park High School,Girls,Varsity,Park,East Ridge
152-HSG24,09/12/2024,17:00:00,Stillwater High School,Girls,Varsity,Stillwater,Irondale
153-HSG24,09/12/2024,17:00:00,White Bear Lake North High School,Girls,Varsity,White Bear Lake,Roseville
154-HSG24,09/12/2024,17:00:00,Woodbury High School,Girls,Varsity,Woodbury,Cretin-Derham Hall
145-HSB24,09/12/2024,19:00:00,Forest Lake High School,Boys,Varsity,Forest Lake,Mounds View
146-HSB24,09/12/2024,19:00:00,Park High School,Boys,Varsity,Park,East Ridge
147-HSB24,09/12/2024,19:00:00,Stillwater High School,Boys,Varsity,Stillwater,Irondale
148-HSB24,09/12/2024,19:00:00,White Bear Lake North High School,Boys,Varsity,White Bear Lake,Roseville
149-HSB24,09/12/2024,19:00:00,Woodbury High School,Boys,Varsity,Woodbury,Cretin-Derham Hall
351-HSB24,09/13/2024,15:45:00,Hill-Murray High School,Boys,Grade 9,TBD,TBD
349-HSB24,09/13/2024,15:45:00,Hill-Murray High School,Boys,Grade 9,TBD,TBD
155-HSG24,09/13/2024,17:00:00,North St Paul High School,Girls,Varsity,North St Paul,Mounds Park Academy
352-HSB24,09/13/2024,17:30:00,Hill-Murray High School,Boys,B-Squad,TBD,TBD
350-HSB24,09/13/2024,17:30:00,Hill-Murray High School,Boys,B-Squad,TBD,TBD
399-HSB24,09/14/2024,09:00:00,Simley High School,Girls,C-Squad,Simley,Burnsville
398-HSB24,09/14/2024,09:00:00,Simley High School,Girls,JV,Simley,Burnsville
156-HSG24,09/14/2024,11:00:00,Roseville High School,Girls,Varsity,Roseville,Osseo
400-HSB24,09/14/2024,11:00:00,Simley High School,Boys,JV,Simley,Rochester John Marshall
401-HSB24,09/14/2024,11:00:00,Simley High School,Boys,C-Squad,Simley,Rochester John Marshall
402-HSB24,09/14/2024,11:00:00,Simley High School,Girls,Varsity,Simley,Burnsville
355-HSB24,09/14/2024,12:15:00,Hill-Murray High School,Boys,Grade 9,TBD,TBD
353-HSB24,09/14/2024,12:15:00,Hill-Murray High School,Boys,Grade 9,TBD,TBD
152-HSB24,09/14/2024,13:00:00,Forest Lake High School,Boys,Varsity,Forest Lake,Hastings
157-HSG24,09/14/2024,13:00:00,Hastings High School,Girls,Varsity,Hastings,Minnetonka
308-HSB24,09/14/2024,13:00:00,Mounds View High School,Girls,Varsity,Mounds View,Blaine
153-HSB24,09/14/2024,13:00:00,Roseville High School,Boys,Varsity,Roseville,Osseo
403-HSB24,09/14/2024,13:00:00,Simley High School,Boys,Varsity,Simley,Rochester John Marshall
421-HSB24,09/14/2024,13:00:00,Tartan High School,Boys,Varsity,Tartan,St Anthony Village
321-HSB24,09/14/2024,13:00:00,White Bear Lake North High School,Boys,Varsity,White Bear Lake,Simley
356-HSB24,09/14/2024,14:00:00,Hill-Murray High School,Boys,B-Squad,TBD,TBD
354-HSB24,09/14/2024,14:00:00,Hill-Murray High School,Boys,B-Squad,TBD,TBD
151-HSB24,09/14/2024,15:00:00,Cretin-Derham Hall,Boys,Varsity,Cretin-Derham Hall,Owatonna
309-HSB24,09/14/2024,15:00:00,Mounds View High School,Boys,Varsity,Mounds View,Park Center
150-HSB24,09/14/2024,15:00:00,Two Rivers High School,Boys,Varsity,Two Rivers,Woodbury
158-HSB24,09/17/2024,17:00:00,East Ridge High School,Boys,Varsity,East Ridge,White Bear Lake
154-HSB24,09/17/2024,17:00:00,Mahtomedi High School,Boys,Varsity,Mahtomedi,Hastings
161-HSB24,09/17/2024,17:00:00,Park High School,Boys,Varsity,Park,Woodbury
162-HSB24,09/17/2024,17:00:00,Roseville High School,Boys,Varsity,Roseville,Forest Lake
156-HSB24,09/17/2024,17:00:00,Tartan High School,Boys,Varsity,Tartan,Hill-Murray
246-HSB24,09/17/2024,17:15:00,Two Rivers High School,Boys,JV,Two Rivers,North St Paul
158-HSG24,09/17/2024,19:00:00,East Ridge High School,Girls,Varsity,East Ridge,White Bear Lake
163-HSG24,09/17/2024,19:00:00,Mahtomedi High School,Girls,Varsity,Mahtomedi,Hastings
161-HSG24,09/17/2024,19:00:00,Park High School,Girls,Varsity,Park,Woodbury
162-HSG24,09/17/2024,19:00:00,Roseville High School,Girls,Varsity,Roseville,Forest Lake
164-HSG24,09/17/2024,19:00:00,Tartan High School,Girls,Varsity,Tartan,Hill-Murray
232-HSB24,09/18/2024,15:45:00,Hastings High School,Boys,C-Squad,Hastings,Mahtomedi
357-HSB24,09/18/2024,15:45:00,Hill-Murray High School,Boys,C-Squad,Hill-Murray,Tartan
233-HSG24,09/18/2024,17:15:00,Hastings High School,Girls,C-Squad,Hastings,Mahtomedi
358-HSB24,09/18/2024,17:15:00,Hill-Murray High School,Girls,C-Squad,Hill-Murray,Tartan
404-HSB24,09/18/2024,17:15:00,Simley High School,Boys,C-Squad,Simley,St Thomas Academy
359-HSB24,09/19/2024,16:00:00,Hill-Murray High School,Boys,B-Squad,Hill-Murray,Two Rivers
168-HSB24,09/19/2024,17:00:00,Forest Lake High School,Boys,Varsity,Forest Lake,East Ridge
165-HSB24,09/19/2024,17:00:00,South St Paul High School,Boys,Varsity,South St Paul,Two Rivers
169-HSB24,09/19/2024,17:00:00,Stillwater High School,Boys,Varsity,Stillwater,Roseville
174-HSG24,09/19/2024,17:00:00,Tartan High School,Girls,Varsity,Tartan,Hastings
170-HSB24,09/19/2024,17:00:00,White Bear Lake North High School,Boys,Varsity,White Bear Lake,Park
171-HSB24,09/19/2024,17:00:00,Woodbury High School,Boys,Varsity,Woodbury,Irondale
405-HSB24,09/19/2024,17:15:00,Simley High School,Boys,JV,Simley,North St Paul
360-HSB24,09/19/2024,17:30:00,Hill-Murray High School,Girls,JV,Hill-Murray,Anoka
163-HSB24,09/19/2024,18:00:00,St Thomas Academy,Boys,Varsity,St Thomas Academy,Mahtomedi
167-HSG24,09/19/2024,19:00:00,Forest Lake High School,Girls,Varsity,Forest Lake,East Ridge
171-HSG24,09/19/2024,19:00:00,Hill-Murray High School,Girls,Varsity,Hill-Murray,Anoka
173-HSG24,09/19/2024,19:00:00,South St Paul High School,Girls,Varsity,South St Paul,Two Rivers
168-HSG24,09/19/2024,19:00:00,Stillwater High School,Girls,Varsity,Stillwater,Roseville
166-HSB24,09/19/2024,19:00:00,Tartan High School,Boys,Varsity,Tartan,Hastings
169-HSG24,09/19/2024,19:00:00,White Bear Lake North High School,Girls,Varsity,White Bear Lake,Park
170-HSG24,09/19/2024,19:00:00,Woodbury High School,Girls,Varsity,Woodbury,Irondale
234-HSG24,09/20/2024,15:45:00,Hastings High School,Girls,C-Squad,Hastings,Tartan
233-HSB24,09/20/2024,17:15:00,Hastings High School,Boys,C-Squad,Hastings,Tartan
361-HSB24,09/21/2024,10:00:00,Hill-Murray High School,Boys,B-Squad,Hill-Murray,Mahtomedi
362-HSB24,09/21/2024,10:00:00,Hill-Murray High School,Girls,JV,Hill-Murray,Eagan
422-HSB24,09/21/2024,10:00:00,Tartan High School,Boys,Varsity,Tartan,Sartell
175-HSG24,09/21/2024,12:00:00,Hill-Murray High School,Girls,Varsity,Hill-Murray,Eagan
300-HSB24,09/21/2024,12:00:00,Irondale High School,Boys,Varsity,Irondale,Henry High School
239-HSG24,09/21/2024,12:00:00,Mahtomedi High School,Girls,Varsity,Mahtomedi,Benilde-St Margaret's
240-HSB24,09/21/2024,14:00:00,Mahtomedi High School,Boys,Varsity,Mahtomedi,Benilde-St Margaret's
444-HSB24,09/21/2024,14:00:00,St Thomas Academy,Boys,Varsity,St Thomas Academy,Cretin-Derham Hall
172-HSB24,09/21/2024,15:00:00,East Ridge High School,Boys,Varsity,East Ridge,Two Rivers
173-HSB24,09/21/2024,19:00:00,Park High School,Boys,Varsity,Park,Shakopee
314-HSB24,09/21/2024,19:00:00,Stillwater High School,Boys,Varsity,Stillwater,Minnetonka
407-HSB24,09/23/2024,17:00:00,Simley High School,Girls,C-Squad,Simley,Rockford
406-HSB24,09/23/2024,17:00:00,Simley High School,Girls,JV,Simley,Rockford
408-HSB24,09/23/2024,19:00:00,Simley High School,Girls,Varsity,Simley,Rockford
234-HSB24,09/24/2024,15:45:00,Hastings High School,Boys,JV,Hastings,Hill-Murray
176-HSG24,09/24/2024,17:00:00,East Ridge High School,Girls,Varsity,East Ridge,Stillwater
174-HSB24,09/24/2024,17:00:00,Hastings High School,Boys,Varsity,Hastings,Hill-Murray
182-HSG24,09/24/2024,17:00:00,Mahtomedi High School,Girls,Varsity,Mahtomedi,Simley
179-HSG24,09/24/2024,17:00:00,Roseville High School,Girls,Varsity,Roseville,Cretin-Derham Hall
177-HSB24,09/24/2024,17:00:00,Tartan High School,Boys,Varsity,Tartan,South St Paul
235-HSG24,09/24/2024,17:15:00,Hastings High School,Girls,JV,Hastings,Hill-Murray
363-HSB24,09/24/2024,17:15:00,Hill-Murray High School,Boys,B-Squad,Hill-Murray,St Paul Central
247-HSB24,09/24/2024,17:15:00,Two Rivers High School,Boys,JV,Two Rivers,St Thomas Academy
179-HSB24,09/24/2024,19:00:00,East Ridge High School,Boys,Varsity,East Ridge,Stillwater
181-HSG24,09/24/2024,19:00:00,Hastings High School,Girls,Varsity,Hastings,Hill-Murray
175-HSB24,09/24/2024,19:00:00,Mahtomedi High School,Boys,Varsity,Mahtomedi,Simley
176-HSB24,09/24/2024,19:00:00,North St Paul High School,Boys,Varsity,North St Paul,Washington Technology Magnet
182-HSB24,09/24/2024,19:00:00,Roseville High School,Boys,Varsity,Roseville,Cretin-Derham Hall
183-HSG24,09/24/2024,19:00:00,Tartan High School,Girls,Varsity,Tartan,South St Paul
178-HSB24,09/24/2024,19:00:00,Two Rivers High School,Boys,Varsity,Two Rivers,St Thomas Academy
364-HSB24,09/25/2024,15:45:00,Hill-Murray High School,Boys,C-Squad,Hill-Murray,Hastings
409-HSB24,09/25/2024,15:45:00,Simley High School,Girls,C-Squad,Simley,Mahtomedi
365-HSB24,09/25/2024,17:15:00,Hill-Murray High School,Girls,C-Squad,Hill-Murray,Hastings
410-HSB24,09/25/2024,17:15:00,Simley High School,Boys,C-Squad,Simley,Mahtomedi
366-HSB24,09/26/2024,15:45:00,Hill-Murray High School,Girls,JV,Hill-Murray,Two Rivers
184-HSG24,09/26/2024,17:00:00,Forest Lake High School,Girls,Varsity,Forest Lake,White Bear Lake
188-HSG24,09/26/2024,17:00:00,Hill-Murray High School,Girls,Varsity,Hill-Murray,Two Rivers
185-HSG24,09/26/2024,17:00:00,Irondale High School,Girls,Varsity,Irondale,Roseville
186-HSG24,09/26/2024,17:00:00,Stillwater High School,Girls,Varsity,Stillwater,Park
235-HSB24,09/26/2024,17:15:00,Hastings High School,Boys,JV,Hastings,St Thomas Academy
368-HSB24,09/26/2024,17:15:00,Hill-Murray High School,Boys,B-Squad,Hill-Murray,Two Rivers
367-HSB24,09/26/2024,17:15:00,Hill-Murray High School,Boys,JV,Hill-Murray,Two Rivers
188-HSB24,09/26/2024,19:00:00,Forest Lake High School,Boys,Varsity,Forest Lake,White Bear Lake
184-HSB24,09/26/2024,19:00:00,Hastings High School,Boys,Varsity,Hastings,St Thomas Academy
185-HSB24,09/26/2024,19:00:00,Hill-Murray High School,Boys,Varsity,Hill-Murray,Two Rivers
189-HSB24,09/26/2024,19:00:00,Irondale High School,Boys,Varsity,Irondale,Roseville
190-HSB24,09/26/2024,19:00:00,Stillwater High School,Boys,Varsity,Stillwater,Park
411-HSB24,09/27/2024,15:45:00,Simley High School,Boys,C-Squad,Simley,South St Paul
412-HSB24,09/27/2024,17:15:00,Simley High School,Girls,C-Squad,Simley,South St Paul
369-HSB24,09/28/2024,09:00:00,Hill-Murray High School,Boys,Grade 9,Hill-Murray,Benilde-St Margaret's
370-HSB24,09/28/2024,09:00:00,Hill-Murray High School,Girls,JV,Hill-Murray,Benilde-St Margaret's
372-HSB24,09/28/2024,11:00:00,Hill-Murray High School,Boys,B-Squad,Hill-Murray,Benilde-St Margaret's
371-HSB24,09/28/2024,11:00:00,Hill-Murray High School,Boys,JV,Hill-Murray,Benilde-St Margaret's
192-HSG24,09/28/2024,11:00:00,Hill-Murray High School,Girls,Varsity,Hill-Murray,Benilde-St Margaret's
241-HSB24,09/28/2024,12:00:00,Mahtomedi High School,Boys,Varsity,Mahtomedi,Mounds View
192-HSB24,09/28/2024,13:00:00,Hill-Murray High School,Boys,Varsity,Hill-Murray,Benilde-St Margaret's
315-HSB24,09/28/2024,13:00:00,Stillwater High School,Girls,Varsity,Stillwater,Morehead
423-HSB24,09/28/2024,13:00:00,Tartan High School,Boys,Varsity,Tartan,Zimmerman
240-HSG24,09/28/2024,14:00:00,Mahtomedi High School,Girls,Varsity,Mahtomedi,Mounds View
452-HSB24,09/28/2024,14:00:00,St Thomas Academy,Boys,Varsity,St Thomas Academy,Roseville
194-HSB24,09/28/2024,19:00:00,Park High School,Boys,Varsity,Park,Hastings`
		const october = 
`Game ID,Date,Time,Venue,Gender,Level,Home Team,Away Team
248-HSB24,10/01/2024,15:45:00,Two Rivers High School,Boys,JV,Two Rivers,Simley
373-HSB24,10/01/2024,16:15:00,Hill-Murray High School,Boys,B-Squad,Hill-Murray,Rosemount
199-HSB24,10/01/2024,17:00:00,East Ridge High School,Boys,Varsity,East Ridge,Irondale
200-HSB24,10/01/2024,17:00:00,Forest Lake High School,Boys,Varsity,Forest Lake,Woodbury
201-HSB24,10/01/2024,17:00:00,Park High School,Boys,Varsity,Park,Cretin-Derham Hall
199-HSG24,10/01/2024,17:00:00,South St Paul High School,Girls,Varsity,South St Paul,Hastings
203-HSB24,10/01/2024,17:00:00,White Bear Lake North High School,Boys,Varsity,White Bear Lake,Stillwater
245-HSG24,10/01/2024,17:15:00,Two Rivers High School,Girls,JV,Two Rivers,Simley
193-HSG24,10/01/2024,19:00:00,East Ridge High School,Girls,Varsity,East Ridge,Irondale
194-HSG24,10/01/2024,19:00:00,Forest Lake High School,Girls,Varsity,Forest Lake,Woodbury
195-HSG24,10/01/2024,19:00:00,Park High School,Girls,Varsity,Park,Cretin-Derham Hall
197-HSB24,10/01/2024,19:00:00,South St Paul High School,Boys,Varsity,South St Paul,Hastings
196-HSB24,10/01/2024,19:00:00,St Thomas Academy,Boys,Varsity,St Thomas Academy,Tartan
197-HSG24,10/01/2024,19:00:00,White Bear Lake North High School,Girls,Varsity,White Bear Lake,Stillwater
236-HSG24,10/02/2024,15:45:00,Hastings High School,Girls,C-Squad,Hastings,South St Paul
374-HSB24,10/02/2024,15:45:00,Hill-Murray High School,Girls,C-Squad,Hill-Murray,North St Paul
413-HSB24,10/02/2024,15:45:00,Simley High School,Boys,C-Squad,Simley,Two Rivers
236-HSB24,10/02/2024,17:15:00,Hastings High School,Boys,C-Squad,Hastings,South St Paul
375-HSB24,10/02/2024,17:15:00,Hill-Murray High School,Boys,C-Squad,Hill-Murray,North St Paul
414-HSB24,10/02/2024,17:15:00,Simley High School,Girls,C-Squad,Simley,Two Rivers
246-HSG24,10/02/2024,17:15:00,Two Rivers High School,Girls,JV,Two Rivers,Mahtomedi
376-HSB24,10/02/2024,19:00:00,Hill-Murray High School,Boys,B-Squad,Hill-Murray,Hill-Murray
209-HSG24,10/02/2024,19:00:00,Two Rivers High School,Girls,Varsity,Two Rivers,Mahtomedi
377-HSB24,10/03/2024,15:45:00,Hill-Murray High School,Girls,JV,Hill-Murray,South St Paul
415-HSB24,10/03/2024,15:45:00,Simley High School,Boys,JV,Simley,Hastings
205-HSB24,10/03/2024,17:00:00,North St Paul High School,Boys,Varsity,North St Paul,Tartan
206-HSB24,10/03/2024,17:00:00,Simley High School,Boys,Varsity,Simley,Hastings
204-HSG24,10/03/2024,17:00:00,Stillwater High School,Girls,Varsity,Stillwater,Forest Lake
207-HSB24,10/03/2024,17:00:00,Two Rivers High School,Boys,Varsity,Two Rivers,Mahtomedi
205-HSG24,10/03/2024,17:00:00,Woodbury High School,Girls,Varsity,Woodbury,Roseville
378-HSB24,10/03/2024,17:15:00,Hill-Murray High School,Boys,JV,Hill-Murray,South St Paul
416-HSB24,10/03/2024,17:15:00,Simley High School,Girls,JV,Simley,Hastings
207-HSG24,10/03/2024,19:00:00,North St Paul High School,Girls,Varsity,North St Paul,Tartan
208-HSG24,10/03/2024,19:00:00,Simley High School,Girls,Varsity,Simley,Hastings
211-HSB24,10/03/2024,19:00:00,Stillwater High School,Boys,Varsity,Stillwater,Forest Lake
212-HSB24,10/03/2024,19:00:00,Woodbury High School,Boys,Varsity,Woodbury,Roseville
210-HSG24,10/05/2024,11:00:00,East Ridge High School,Girls,Varsity,East Ridge,Mahtomedi
214-HSB24,10/05/2024,11:00:00,Woodbury High School,Boys,Varsity,Woodbury,St Paul Central
211-HSG24,10/05/2024,13:00:00,Forest Lake High School,Girls,Varsity,Forest Lake,Blaine
250-HSB24,10/05/2024,13:00:00,Irondale High School,Boys,Varsity,Irondale,St Cloud Apollo
379-HSB24,10/05/2024,13:00:00,North St Paul High School,Boys,Varsity,North St Paul,St Anthony Village
212-HSG24,10/05/2024,15:00:00,South St Paul High School,Girls,Varsity,South St Paul,Duluth East`

		const calendars = {
			"august": august,
			"september": september,
			"october": october,
		}
        
        function parse_csv(csv) {
            const lines = csv.split("\n");
            const headers = lines[0].split(",");
            const body = lines.slice(1);
            const data = [];
            for (line of body) {
                let datum = {}
                let line_data = line.split(",");
                for (let i = 0; i < headers.length; i++) {
                    datum[headers[i]] = line_data[i];
                }
                data.push(datum);
            }
            return data;
        }

        function handleVenueCheckboxChange(evt) {
            // check all game checkboxes
            let div = evt.target.parentElement.parentElement;
            let checkboxes = div.getElementsByClassName("card-checkbox");
            for (let checkbox of checkboxes) {
                if (checkbox.checked != evt.target.checked) {
                    checkbox.checked = evt.target.checked;
                    var event = new Event("change");
                    checkbox.dispatchEvent(event);
                }
            }

            // permanent check
            const parent = evt.target.parentElement;
            const index = [].indexOf.call(parent.childNodes, evt.target);
            if (evt.target.checked) {
                evt.target.outerHTML = evt.target.outerHTML.replace(">", " checked>");
            } else {
                evt.target.outerHTML = evt.target.outerHTML.replace(' checked=""', "");
            }
            parent.childNodes[index].addEventListener("click", handleVenueCheckboxChange);


        }

        function handleGameCheckboxChange(evt) {
            const parent = evt.target.parentElement;
            const index = [].indexOf.call(parent.childNodes, evt.target);
            const div = evt.target.parentElement.parentElement.parentElement;
            const selectedGamesEl = div.getElementsByClassName("selected-games")[0];
            const totalGamesEl = div.getElementsByClassName("total-games")[0];
            const selectedGames = parseInt(selectedGamesEl.innerText);
            const totalGames = parseInt(totalGamesEl.innerText);
            if (evt.target.checked) {
                evt.target.outerHTML = evt.target.outerHTML.replace(">", " checked>");
                selectedGamesEl.innerText = selectedGames + 1;
                if (selectedGames + 1 === totalGames) {
                    let checkbox = div.getElementsByClassName("venue-checkbox")[0];
                    checkbox.checked = true;
                }
                
            } else {
                evt.target.outerHTML = evt.target.outerHTML.replace(' checked=""', "");
                selectedGamesEl.innerText = selectedGames - 1;
                let checkbox = div.getElementsByClassName("venue-checkbox")[0];
                checkbox.checked = false;
            }
            parent.childNodes[index].addEventListener("change", handleGameCheckboxChange);

        }

        function createVenueContainer(venue, cardData) {
            divEl = document.createElement("div");
            listEl = document.createElement("ul");
            listEl.className="card-list";

            let venueEl = document.createElement("p");
            venueEl.className = "card-venue closed";
            venueEl.addEventListener("click", (evt) => {
                if (evt.target.className.search("venue-checkbox")){
                    evt.currentTarget.classList.toggle("closed");
                }
            });

            let venueCheckbox = document.createElement("input");
            venueCheckbox.type = "checkbox";
            venueCheckbox.className = "venue-checkbox";
            venueCheckbox.addEventListener("click", handleVenueCheckboxChange);
            venueEl.appendChild(venueCheckbox);

            let textNode = document.createTextNode(venue);
            venueEl.appendChild(textNode);

            let gameRatioSpan = document.createElement("span");
            gameRatioSpan.className = "game-ratio";
            textNode = document.createTextNode("(");
            gameRatioSpan.appendChild(textNode);

            let selectedGames = document.createElement("span");
            selectedGames.className = "selected-games";
            selectedGames.innerText = "0";
            gameRatioSpan.appendChild(selectedGames);

            textNode = document.createTextNode("/");
            gameRatioSpan.appendChild(textNode);

            
            let totalGamesEl = document.createElement("span");
            totalGamesEl.className = "total-games";
            let totalGames = cardData.filter((a) => {return a["Venue"] === venue;}).length;
            totalGamesEl.innerText = `${totalGames}`
            gameRatioSpan.appendChild(totalGamesEl);

            textNode = document.createTextNode(")");
            gameRatioSpan.appendChild(textNode);
            
            venueEl.appendChild(gameRatioSpan);
            divEl.appendChild(venueEl);
            divEl.appendChild(listEl);

            return divEl;

        }

        function appendGameToVenueContainer(venueContainer, data) {

            let listEl = venueContainer.getElementsByTagName("ul")[0];

            const listItem = document.createElement("li");
            const label = document.createElement("label");
            const checkbox = document.createElement("input");
            checkbox.type = "checkbox";
            checkbox.id = `availability-${data["Game ID"]}`;
            checkbox.name = data["Game ID"];
            checkbox.className = "card-checkbox";
            checkbox.addEventListener("change", handleGameCheckboxChange);
            label.innerText = `${data["Gender"]} ${data["Level"]} ${data["Time"]}`;
            label.htmlFor = checkbox.id;
            label.className = "card-label";
            listItem.appendChild(checkbox);
            listItem.appendChild(label);
            listItem.className = "card-game";
            listEl.appendChild(listItem);
        }

        function createCard(day, cardData){
            let gamesAdded = 0;
            const cardEl = document.createElement("div");
            cardEl.className = "calendar-card";
            if (day > 0) {
                let dayEl = document.createElement("div");
                dayEl.className = "calendar-date";
                dayEl.innerText = day;
                cardEl.appendChild(dayEl);
            }
            if (cardData) {
                let prevVenue = "";
                let venueContainer = null;
                for (data of cardData) {
                    let venue = data["Venue"];

                    if (venue != prevVenue) {
                        venueContainer = createVenueContainer(venue, cardData);
                        cardEl.appendChild(venueContainer);
                        prevVenue = venue;
                    }

                    appendGameToVenueContainer(venueContainer, data);
                    gamesAdded ++;

                }
            }
            return { cardEl, gamesAdded };
        }

        function generateCalendars() {
            for (let key in calendars) {

                const calendar = document.getElementById(`${key}-cards`);
                if (calendar.innerHTML != "") {
                    continue;
                }

                const calendarData = parse_csv(calendars[key]);
                calendarData.sort((a, b) => new Date(a["Date"] + " " + a["Time"]) < new Date(b["Date"] + " " + b["Time"]) ? 1 : -1);
                calendarData.sort((a, b) => a["Venue"] < b["Venue"] ? 1 : -1);
                calendarData.sort((a, b) => new Date(a["Date"]) < new Date(b["Date"]) ? 1 : -1);

                const date = new Date(`${key} 1, 2024`);

                let cards = 0;
                let totalGames = calendarData.length;
                let totalGamesAdded = 0;

                for (let i = 0; i < date.getDay(); i ++) {
                    let { cardEl, gamesAdded } = createCard(0);
                    calendar.appendChild(cardEl);
                    cards ++;
                }

                do {
                    let cardData = [];
                    if (calendarData.length == 0) {
                        break;
                    }
                    let game = calendarData.pop();
                    let gameDate = new Date(game["Date"]);
                    while (gameDate.valueOf() == date.valueOf()) {
                        cardData.push(game);
                        if (calendarData.length == 0) {
                            break;
                        }
                        game = calendarData.pop();
                        gameDate = new Date(game["Date"]);
                    }
                    calendarData.push(game);

                    let { cardEl, gamesAdded } = createCard(date.getDate(), cardData);
                    totalGamesAdded += gamesAdded;
                    calendar.appendChild(cardEl);
                    cards ++;
                    date.setDate(date.getDate() + 1);

                } while (date.getDate() > 1);

                while (cards < 7 * 5) {
                    let { cardEl, gamesAdded } = createCard(0);
                    calendar.appendChild(cardEl);
                    cards ++;
                }
                if (totalGamesAdded != totalGames) {
                    alert("something went wrong");
                }
            }
        }

        let page = "home";
        const pages = ["home", "august", "september", "october"];

        function switchPage(page) {
            let homepage = document.getElementById("homepage");
            let calendarpage = document.getElementById("calendar-main");
            let augustCards = document.getElementById("august-cards");
            let septemberCards = document.getElementById("september-cards");
            let octoberCards = document.getElementById("october-cards");
            if (page === "home") {
                homepage.style.display = "block";
                calendarpage.style.display = "none";
            } else {
                homepage.style.display = "none";
                calendarpage.style.display = "block";
                if (page === "august") {
                    augustCards.style.display = "grid";
                    septemberCards.style.display = "none";
                    octoberCards.style.display = "none";
                    document.getElementById("calendar-title").innerText = "August";
                } else if (page === "september") {
                    augustCards.style.display = "none";
                    septemberCards.style.display = "grid";
                    octoberCards.style.display = "none";
                    document.getElementById("calendar-title").innerText = "September";
                } else if (page === "october") {
                    augustCards.style.display = "none";
                    septemberCards.style.display = "none";
                    octoberCards.style.display = "grid";
                    document.getElementById("calendar-title").innerText = "October";
                }
            }

            let index = pages.indexOf(page);
            const nextBtn = document.getElementById("next-btn");
            const prevBtn = document.getElementById("previous-btn");
            if (index === pages.length-1) {
                nextBtn.disabled = true;
            } else {
                nextBtn.disabled = false;
            }
            if (index == 0) {
                prevBtn.disabled = true;
            } else {
                prevBtn.disabled = false;
            }
        }

        function nextPage() {
            let index = pages.indexOf(page);
            if (index == pages.length - 1) {
                alert("Already at the last page!");
                return;
            } else {
                page = pages[index + 1];
                switchPage(page);
            }
        }
        function previousPage() {
            let index = pages.indexOf(page);
            if (index == 0) {
                alert("Already at the first page!");
                return;
            } else {
                page = pages[index - 1];
                switchPage(page);
            }
        }

        function saveFile(evt) {
            const nameField = document.getElementById("referee-name");
            if (nameField == null || nameField.value === "") {
                evt.preventDefault();
                alert("You must fill out the referee name field on the first page!");
            } else {
                let name = nameField.value.replaceAll(" ", "_");
                name = name.replaceAll("[^A-z_]", "");
                evt.target.download = name;
                evt.target.href='data:text/html;charset=UTF-8,'+encodeURIComponent(document.documentElement.outerHTML)
            }
        }

        function downloadAvailability(evt) {
            const nameField = document.getElementById("referee-name");
            if (nameField == null || nameField.value === "") {
                evt.preventDefault();
                alert("You must fill out the referee name field on the first page!");
            } else {

                let name = nameField.value.replaceAll(" ", "_");
                let json = {
                    name: nameField.value,
                    availabileFor: [],
                };
                let checkboxes = document.getElementsByClassName("card-checkbox");
                for (let checkbox of checkboxes) {
                    if (checkbox.checked) {
                        json.availabileFor.push(checkbox.name);
                    }
                }
                name = name.replaceAll("[^A-z_]", "");
                evt.target.download = name;
                evt.target.href='data:application/json;charset=UTF-8,'+JSON.stringify(json);
            }
        }

        switchPage("home");
        generateCalendars();
        window.addEventListener("beforeunload", function (e) {
            var confirmationMessage = 'It looks like you have been editing something. '
                                    + 'If you leave before saving, your changes will be lost.';

            (e || window.event).returnValue = confirmationMessage; //Gecko + IE
            return confirmationMessage; //Gecko + Webkit, Safari, Chrome etc.
        });
    </script>
</html>
